<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.147.6">
    <meta name="generator" content="Relearn 7.6.1+0b83617ee9da5253aafcf11807b256da7d88d709">
    <meta name="description" content="DecayMatrix API Reference Info This page documents the decay_matrix.py module, which provides core data structures and utilities for nuclide decay chain calculations. It is part of the NuDCA (Nuclear Decay Chain Astrophysics) package.
Overview The decay_matrix.py module defines classes and functions to construct, store, and manipulate decay matrices for nuclear decay networks. It is designed for scientific computing and supports analytical and numerical solutions to the Bateman equations.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="nudca.decay_matrix :: NuDCA">
    <meta name="twitter:description" content="DecayMatrix API Reference Info This page documents the decay_matrix.py module, which provides core data structures and utilities for nuclide decay chain calculations. It is part of the NuDCA (Nuclear Decay Chain Astrophysics) package.
Overview The decay_matrix.py module defines classes and functions to construct, store, and manipulate decay matrices for nuclear decay networks. It is designed for scientific computing and supports analytical and numerical solutions to the Bateman equations.">
    <meta property="og:url" content="https://nudcacode.github.io/nudca.github.io/api/decaymatrix/index.html">
    <meta property="og:site_name" content="NuDCA">
    <meta property="og:title" content="nudca.decay_matrix :: NuDCA">
    <meta property="og:description" content="DecayMatrix API Reference Info This page documents the decay_matrix.py module, which provides core data structures and utilities for nuclide decay chain calculations. It is part of the NuDCA (Nuclear Decay Chain Astrophysics) package.
Overview The decay_matrix.py module defines classes and functions to construct, store, and manipulate decay matrices for nuclear decay networks. It is designed for scientific computing and supports analytical and numerical solutions to the Bateman equations.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="nudca API">
    <meta itemprop="name" content="nudca.decay_matrix :: NuDCA">
    <meta itemprop="description" content="DecayMatrix API Reference Info This page documents the decay_matrix.py module, which provides core data structures and utilities for nuclide decay chain calculations. It is part of the NuDCA (Nuclear Decay Chain Astrophysics) package.
Overview The decay_matrix.py module defines classes and functions to construct, store, and manipulate decay matrices for nuclear decay networks. It is designed for scientific computing and supports analytical and numerical solutions to the Bateman equations.">
    <meta itemprop="wordCount" content="346">
    <title>nudca.decay_matrix :: NuDCA</title>
    <link href="/nudca.github.io/fonts/fontawesome/css/fontawesome-all.min.css?1748423723" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/nudca.github.io/fonts/fontawesome/css/fontawesome-all.min.css?1748423723" rel="stylesheet"></noscript>
    <link href="/nudca.github.io/css/perfect-scrollbar/perfect-scrollbar.min.css?1748423723" rel="stylesheet">
    <link href="/nudca.github.io/css/theme.min.css?1748423723" rel="stylesheet">
    <link href="/nudca.github.io/css/format-html.min.css?1748423723" rel="stylesheet" id="R-format-style">
    <link href="/nudca.github.io/css/auto-complete/auto-complete.min.css?1748423723" rel="stylesheet">
    <script src="/nudca.github.io/js/auto-complete/auto-complete.min.js?1748423723" defer></script>
    <script src="/nudca.github.io/js/lunr/lunr.min.js?1748423723" defer></script>
    <script src="/nudca.github.io/js/lunr/lunr.stemmer.support.min.js?1748423723" defer></script>
    <script src="/nudca.github.io/js/lunr/lunr.multi.min.js?1748423723" defer></script>
    <script src="/nudca.github.io/js/lunr/lunr.en.min.js?1748423723" defer></script>
    <script src="/nudca.github.io/js/search.min.js?1748423723" defer></script>
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/api\/decaymatrix\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/nudcacode.github.io\/nudca.github.io';
      window.relearn.contentLangs=['en'];
      window.relearn.index_js_url="/nudca.github.io/searchindex.en.js?1748423723";
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // variant stuff
      window.relearn.themevariants = [ 'blue' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
  </head>
  <body class="mobile-support html" data-url="/nudca.github.io/api/decaymatrix/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#main-classes">Main Classes</a>
      <ul>
        <li><a href="#decaymatrix"><code>DecayMatrix</code></a></li>
        <li><a href="#matrixbuilder"><code>MatrixBuilder</code></a></li>
      </ul>
    </li>
    <li><a href="#utility-functions">Utility Functions</a></li>
    <li><a href="#usage-example">Usage Example</a></li>
    <li><a href="#notes">Notes</a></li>
    <li><a href="#see-also">See Also</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList">
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/nudca.github.io/index.html"><span itemprop="name">NuDCA</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/nudca.github.io/api/index.html"><span itemprop="name">nudca API</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">nudca.decay_matrix</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/nudca.github.io/api/decaydiagram/index.html" title="nudca.decay_diagram (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/nudca.github.io/api/nucleodecay/index.html" title="nudca.nucleo_decay (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable api" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="nudcadecay_matrix">nudca.decay_matrix</h1>

<h1 id="decaymatrix-api-reference">DecayMatrix API Reference</h1>

<details open class=" box cstyle notices info">
  <summary class="box-label" tabindex="-1">
    <i class="fa fa-atom"></i> 
    Info
  </summary>
  <div class="box-content">
<p>This page documents the <code>decay_matrix.py</code> module, which provides core data structures and utilities for nuclide decay chain calculations. It is part of the NuDCA (Nuclear Decay Chain Astrophysics) package.</p>
  </div>
</details>
<h2 id="overview">Overview</h2>
<p>The <code>decay_matrix.py</code> module defines classes and functions to construct, store, and manipulate decay matrices for nuclear decay networks. It is designed for scientific computing and supports analytical and numerical solutions to the Bateman equations.</p>
<hr>
<h2 id="main-classes">Main Classes</h2>
<h3 id="decaymatrix"><code>DecayMatrix</code></h3>
<p>Represents the decay matrix and related structures for nuclide decay calculations.</p>
<p><strong>Attributes:</strong></p>
<ul>
<li><code>decay_constants</code>: <code>np.ndarray</code> â€” Array of decay constants for each nuclide.</li>
<li><code>matrix_P</code>: <code>scipy.sparse.csc_matrix</code> â€” Transformation matrix for Bateman solutions.</li>
<li><code>matrix_P_inv</code>: <code>scipy.sparse.csc_matrix</code> â€” Inverse of transformation matrix P.</li>
<li><code>initial_abundance</code>: <code>np.ndarray</code> â€” Initial abundance vector (default: zeros).</li>
<li><code>matrix_Lambda</code>: <code>scipy.sparse.csc_matrix</code> â€” Diagonal matrix for decay constants (default: zeros).</li>
</ul>
<p><strong>Methods:</strong></p>
<ul>
<li><code>__init__(decay_constants, matrix_P, matrix_P_inv)</code> â€” Initialize with decay constants and transformation matrices.</li>
<li><code>__repr__()</code> â€” String representation.</li>
<li><code>__eq__(other)</code> â€” Equality comparison.</li>
<li><code>__ne__(other)</code> â€” Inequality comparison.</li>
</ul>
<hr>
<h3 id="matrixbuilder"><code>MatrixBuilder</code></h3>
<p>Builds matrices representing the decay of nuclides based on decay constants, branching ratios, and decay chains.</p>
<p><strong>Attributes:</strong></p>
<ul>
<li><code>decay_database</code>: <code>DecayDatabase</code> â€” Database containing nuclide decay data.</li>
</ul>
<p><strong>Properties:</strong></p>
<ul>
<li><code>nuclides</code> â€” List of nuclides.</li>
<li><code>nuclide_index_map</code> â€” Mapping of nuclide names to indices.</li>
<li><code>matrix_size</code> â€” Number of nuclides.</li>
</ul>
<p><strong>Key Methods:</strong></p>
<ul>
<li><code>build_decay_matrix()</code> â€” Returns transformation matrix P and its inverse.</li>
<li><code>build_matrix_A()</code> â€” Constructs the decay matrix A (rates between nuclides).</li>
<li><code>build_matrix_P(matrix_A)</code> â€” Constructs the transformation matrix P.</li>
<li><code>build_matrix_P_inv(matrix_A, matrix_P)</code> â€” Constructs the inverse of P.</li>
<li><code>_check_identity()</code> â€” Checks if P and P_inv form an identity matrix.</li>
</ul>
<hr>
<h2 id="utility-functions">Utility Functions</h2>
<ul>
<li><code>serialize_decay_matrix(data_source='ENDF-B-VIII.1_decay')</code>
<ul>
<li>Saves the decay matrix P and its inverse to disk as <code>.npz</code> files.</li>
</ul>
</li>
<li><code>load_decay_matrix(data_source='ENDF-B-VIII.1_decay') -&gt; DecayMatrix</code>
<ul>
<li>Loads the decay matrix P and its inverse from disk and returns a <code>DecayMatrix</code> object.</li>
</ul>
</li>
<li><code>_csc_matrix_equal(matrix_a, matrix_b)</code>
<ul>
<li>Helper to compare two sparse matrices for exact equality.</li>
</ul>
</li>
</ul>
<hr>
<h2 id="usage-example">Usage Example</h2>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> nudca.decay_matrix <span style="color:#f92672">import</span> load_decay_matrix
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>decay_matrix <span style="color:#f92672">=</span> load_decay_matrix()
</span></span><span style="display:flex;"><span>print(decay_matrix)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Access transformation matrices:</span>
</span></span><span style="display:flex;"><span>P <span style="color:#f92672">=</span> decay_matrix<span style="color:#f92672">.</span>matrix_P
</span></span><span style="display:flex;"><span>P_inv <span style="color:#f92672">=</span> decay_matrix<span style="color:#f92672">.</span>matrix_P_inv</span></span></code></pre></div>
<hr>
<h2 id="notes">Notes</h2>
<ul>
<li>The module relies on SciPy sparse matrices for efficient storage and computation.</li>
<li>Decay data is loaded from a <code>DecayDatabase</code> (see related documentation).</li>
<li>The Bateman solution is supported via transformation matrices P and P_inv.</li>
</ul>
<hr>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="/nudca.github.io/api/decaydatabase/index.html">DecayDatabase API</a></li>
</ul>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <a id="R-logo" class="R-default" href="/nudca.github.io/index.html">
            <div class="logo-title">NuDCA</div>
          </a>
        </div>
        <search><form action="/nudca.github.io/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="/nudca.github.io/index.html"><a class="padding" href="/nudca.github.io/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/nudca.github.io/introduction/index.html"><a class="padding" href="/nudca.github.io/introduction/index.html">Introduction</a><ul id="R-subsections-e1ed3a04f1f57a27be4a8d0eb274be18" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/nudca.github.io/installation/index.html"><a class="padding" href="/nudca.github.io/installation/index.html">Installation</a><ul id="R-subsections-ff749ccaab053548f690f97bcd6daed0" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/nudca.github.io/tutorial/index.html"><a class="padding" href="/nudca.github.io/tutorial/index.html">Tutorials</a><ul id="R-subsections-b6c4d52bffb23fb821243181492a16b3" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/nudca.github.io/theoretic/index.html"><a class="padding" href="/nudca.github.io/theoretic/index.html">Theoretical Framework</a><ul id="R-subsections-3bce8336bdb03da55f92156724a3a267" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-id="/nudca.github.io/api/index.html"><a class="padding" href="/nudca.github.io/api/index.html">nudca API</a><ul id="R-subsections-944da21c517df0c48dfbef7af28f3093" class="collapsible-menu">
            <li class="" data-nav-id="/nudca.github.io/api/nuclide/index.html"><a class="padding" href="/nudca.github.io/api/nuclide/index.html">nudca.nuclide</a></li>
            <li class="" data-nav-id="/nudca.github.io/api/decaydatabase/index.html"><a class="padding" href="/nudca.github.io/api/decaydatabase/index.html">nudca.decay_database</a></li>
            <li class="" data-nav-id="/nudca.github.io/api/decaydiagram/index.html"><a class="padding" href="/nudca.github.io/api/decaydiagram/index.html">nudca.decay_diagram</a></li>
            <li class="active " data-nav-id="/nudca.github.io/api/decaymatrix/index.html"><a class="padding" href="/nudca.github.io/api/decaymatrix/index.html">nudca.decay_matrix</a></li>
            <li class="" data-nav-id="/nudca.github.io/api/nucleodecay/index.html"><a class="padding" href="/nudca.github.io/api/nucleodecay/index.html">nudca.nucleo_decay</a></li>
            <li class="alwaysopen " data-nav-id="/nudca.github.io/api/kilonovae/index.html"><a class="padding" href="/nudca.github.io/api/kilonovae/index.html">nudca.kilonovae</a><ul id="R-subsections-f64c60b2e35b8001768212130fb12c4e" class="collapsible-menu"></ul></li></ul></li>
            <li class="" data-nav-id="/nudca.github.io/references/index.html"><a class="padding" href="/nudca.github.io/references/index.html">References</a><ul id="R-subsections-26caf0e43dd165bcbddd8eb517876f9e" class="collapsible-menu"></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/nudca.github.io/js/clipboard/clipboard.min.js?1748423723" defer></script>
    <script src="/nudca.github.io/js/perfect-scrollbar/perfect-scrollbar.min.js?1748423723" defer></script>
    <script>
      window.MathJax = Object.assign( window.MathJax || {}, {
        tex: {
          inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
          displayMath: [['\\[', '\\]'], ['$$', '$$']], 
        },
        options: {
          enableMenu: false 
        }
      }, JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="/nudca.github.io/js/mathjax/tex-mml-chtml.js?1748423723"></script>
    <script src="/nudca.github.io/js/theme.min.js?1748423723" defer></script>
  </body>
</html>
